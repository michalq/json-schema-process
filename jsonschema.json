{"$id":"https://cloudinary.com/pmm/webhook-notification/payload","$schema":"https://json-schema.org/draft-07/schema","title":"Notification payload","description":"A generic payload for notification","type":"object","allOf":[{"$ref":"#/definitions/common_payload"},{"$ref":"#/definitions/notifications_type"}],"definitions":{"common_payload":{"title":"Common payload","description":"Fields that are generic for all of the notifications.","properties":{"requester_ip":{"type":"string","format":"ipv4","examples":["127.0.0.1"],"description":"Available under the flag `requester_ip_enabled`."},"notification_context":{"type":"object","properties":{"triggered_at":{"type":"string","description":"The date when the action of this notification was triggered at in ISO-8601 format. Available under the flag `request_context_in_notification`.","examples":["2018-11-13T20:20:39+00:00"],"format":"date-time"},"triggered_by":{"description":"Field represents who triggers this action. Available under the flag `request_context_in_notification`.","oneOf":[{"type":"object","description":"If the action was triggered from cloudinary UI by customer.","required":["type","id"],"examples":["example@example.com"],"properties":{"type":{"const":"ui"},"id":{"type":"string","description":"Email of client that request the action.","examples":["example@example.com"]}}},{"type":"object","description":"If the action was performed using API.","examples":["5b404497-99c3-43cd-9b6f-f70535016367"],"required":["type","id"],"properties":{"type":{"const":"api"},"id":{"type":"string","description":"Access key of client that triggers action.","examples":["1234567890"]}}}]}}}}},"notifications_type":{"title":"Specific notification","description":"One of the possible value for notification","oneOf":[{"$ref":"#/definitions/notifications_type/definitions/access_control_changed"},{"$ref":"#/definitions/notifications_type/definitions/cache_warm_up"},{"$ref":"#/definitions/notifications_type/definitions/create_folder"},{"$ref":"#/definitions/notifications_type/definitions/delete_by_token"},{"$ref":"#/definitions/notifications_type/definitions/delete"},{"$ref":"#/definitions/notifications_type/definitions/delivery"},{"$ref":"#/definitions/notifications_type/definitions/eager"},{"$ref":"#/definitions/notifications_type/definitions/error"},{"$ref":"#/definitions/notifications_type/definitions/explode"},{"$ref":"#/definitions/notifications_type/definitions/generate_archive"},{"$ref":"#/definitions/notifications_type/definitions/info"},{"$ref":"#/definitions/notifications_type/definitions/live"},{"$ref":"#/definitions/notifications_type/definitions/moderation"},{"$ref":"#/definitions/notifications_type/definitions/move"},{"$ref":"#/definitions/notifications_type/definitions/multi"},{"$ref":"#/definitions/notifications_type/definitions/publish"},{"$ref":"#/definitions/notifications_type/definitions/rename"},{"$ref":"#/definitions/notifications_type/definitions/report"},{"$ref":"#/definitions/notifications_type/definitions/resource_context_changed"},{"$ref":"#/definitions/notifications_type/definitions/resource_display_name_changed"},{"$ref":"#/definitions/notifications_type/definitions/resource_metadata_changed"},{"$ref":"#/definitions/notifications_type/definitions/resource_tags_changed"},{"$ref":"#/definitions/notifications_type/definitions/sprite"},{"$ref":"#/definitions/notifications_type/definitions/upload"}],"definitions":{"access_control_changed":{"title":"TODO","description":"TODO","type":"object","properties":{"notification_type":{"const":"access_control_changed"},"source":{"$ref":"#/definitions/source"},"resources":{"type":"array"}}},"cache_warm_up":{"title":"Cache warm up","description":"Media Optimization warm up job","type":"object","properties":{"notification_type":{"const":"cache_warm_up"},"batch_id":{"type":"string"},"url":{"type":"string"}}},"create_folder":{"title":"Create folder","description":"You only receive a separate notification for creating a folder within the Media Library. Renaming or Deleting empty folders provide no notifications. Renaming/deleting folders w/ assets will trigger","type":"object","properties":{"notification_type":{"const":"create_folder"},"source":{"$ref":"#/definitions/source"},"folder_path":{"type":"string","example":"Folder name"},"folder_name":{"type":"string","example":"Folder name"}}},"delete_by_token":{"title":"TODO","description":"TODO","type":"object","properties":{"notification_type":{"const":"delete_by_token"},"result":{"oneOf":[{"const":"not found"},{"const":"ok"}],"asset_id":{"$ref":"#/definitions/asset_id"},"public_id":{"$ref":"#/definitions/public_id"},"resource_type":{"$ref":"#/definitions/resource_type"}}}},"delete":{"title":"Delete notification","description":"Notification about deleting resource","type":"object","properties":{"notification_type":{"const":"delete"},"resources":{"type":"array","items":{"type":"object","required":[],"properties":{"asset_id":{"$ref":"#/definitions/asset_id"},"resource_type":{"$ref":"#/definitions/resource_type"},"type":{"enum":["upload"],"example":"upload"},"public_id":{"type":"string","example":"legal-forms"},"version":{"type":"number","example":1555368787}}}}}},"delivery":{"title":"TODO","description":"TODO","type":"object","properties":{"notification_type":{"const":"delivery"}}},"eager":{"title":"Eager upload","description":"Eager upload","type":"object","properties":{"notification_type":{"const":"eager"},"timestamp":{"type":"string","format":"date-time","examples":["2022-09-20T07:56:21+00:00"]},"request_id":{"$ref":"#/definitions/request_id"},"eager":{"type":"array","items":{"type":"object","properties":{"transformation":{"type":"string","examples":["e_background_removal/c_limit,w_1600,h_1600/pg_1,fl_lossy.any_format.progressive,f_jpg,q_auto,dpr_2"]},"status":{"enum":["failed"]},"reason":{"type":"string"}}}},"batch_id":{"type":"string"},"asset_id":{"$ref":"#/definitions/asset_id"},"public_id":{"$ref":"#/definitions/public_id"}}},"error":{"title":"Eager upload","description":"Eager upload","type":"object","properties":{"notification_type":{"const":"error"},"error":{"type":"object","properties":{"message":{"type":"string"},"status":{"type":"string"},"request_id":{"$ref":"#/definitions/request_id"}}},"params":{"type":"object"}}},"explode":{"title":"TODO","description":"TODO","type":"object","properties":{"notification_type":{"const":"explode"},"pages":{"type":"number"},"image_infos":{"type":"object"},"batch_id":{"type":"string"},"asset_id":{"$ref":"#/definitions/asset_id"}}},"generate_archive":{"title":"TODO","description":"TODO","type":"object","properties":{"notification_type":{"const":"generate_archive"},"batch_id":{"type":"string"}}},"info":{"title":"Info","description":"Info","type":"object","properties":{"notification_type":{"const":"info"},"info_kind":{"type":"string"},"info_status":{"type":"string"},"asset_id":{"$ref":"#/definitions/asset_id"},"public_id":{"$ref":"#/definitions/public_id"},"uploaded_at":{"type":"string","format":"date-time"},"version":{"type":"number","format":"integer"},"url":{"type":"string","format":"uri"},"secure_url":{"type":"string","format":"uri"},"etag":{"type":"string"}}},"live":{"title":"Live","description":"Live","type":"object","properties":{"notification_type":{"const":"live"},"public_id":{"$ref":"#/definitions/public_id"},"live_input_uri":{"type":"string","format":"uri"},"live_output_uri":{"type":"string","format":"uri"},"event":{"type":"string"}}},"moderation":{"title":"Modertion","description":"Moderation","type":"object","properties":{"notification_type":{"const":"moderation"},"asset_id":{"$ref":"#/definitions/asset_id"},"public_id":{"$ref":"#/definitions/public_id"},"uploaded_at":{"type":"string","format":"date-time"},"version":{"type":"number","format":"integer"},"url":{"type":"string","format":"uri"},"secure_url":{"type":"string","format":"uri"},"etag":{"type":"string"}}},"move":{"title":"Move","description":"Move","type":"object","properties":{"notification_type":{"const":"move"},"source":{"$ref":"#/definitions/source"},"resources":{"type":"array","items":{"type":"object","required":["asset_id","resource_type","type","from_key","to_key"],"properties":{"asset_id":{"$ref":"#/definitions/asset_id"},"resource_type":{"$ref":"#/definitions/resource_type"},"type":{"type":"string"},"from_key":{"type":"string"},"to_key":{"type":"string"}}}}}},"multi":{"title":"TODO","description":"TODO","type":"object","properties":{"notification_type":{"const":"multi"}}},"publish":{"title":"Published","description":"Published","type":"object","definitions":{"failed_publish":{"type":"object","properties":{"error":{"type":"object","properties":{"message":{"const":"Too many matching resources found"}}}}},"publish":{"type":"object","properties":{"published":{"type":"array","items":{"type":"object","required":["asset_id","public_id","format","version","resource_type","type","created_at","bytes","width","height","folder","url","secure_url"],"properties":{"asset_id":{"$ref":"#/definitions/asset_id"},"public_id":{"$ref":"#/definitions/public_id"},"format":{"type":"string","examples":["png"]},"version":{"type":"number","examples":[1665990551]},"resource_type":{"$ref":"#/definitions/resource_type"},"type":{"$ref":"#/definitions/type"},"created_at":{"type":"string","format":"date-time"},"bytes":{"type":"number"},"width":{"type":"number"},"height":{"type":"number"},"folder":{"type":"string"},"url":{"type":"string"},"secure_url":{"type":"string"}}}},"failed":{"type":"array","items":{"type":"object","required":["public_id","message"],"properties":{"public_id":{"$ref":"#/definitions/public_id"},"message":{"type":"string"},"type":{"type":"string"}}}}}}},"oneOf":[{"$ref":"#/definitions/notifications_type/definitions/publish/definitions/failed_publish"},{"$ref":"#/definitions/notifications_type/definitions/publish/definitions/publish"}],"properties":{"notification_type":{"const":"publish"}}},"rename":{"title":"Rename notification","description":"Public_id changed in some way (moved folders or files renamed)","type":"object","required":["notification_type","asset_id","from_public_id","to_public_id"],"properties":{"notification_type":{"const":"rename"},"asset_id":{"$ref":"#/definitions/asset_id"},"from_public_id":{"type":"string","example":"find-the-perfect-song-for-your-film"},"to_public_id":{"type":"string","example":"Fetch Folder/find-the-perfect-song-for-your-film"},"from_type":{"$ref":"#/definitions/resource_type","description":"Field appeares when while renaming 'kind' changes."},"to_type":{"$ref":"#/definitions/resource_type","description":"Field appeares when while renaming 'kind' changes."},"resource_type":{"$ref":"#/definitions/resource_type"},"type":{"$ref":"#/definitions/type"}}},"report":{"title":"Audit log report","type":"object","properties":{"notification_type":{"const":"report"},"report":{"type":"string","examples":["Audit log report: {:id=>\\\"2d275b65dedb384309daf2546c5f015e2824e6d5503b97d9abfd89a3eb8f8eaf\\\", :report_name=>\\\"audit_report_2022-10-06_09:48:42_ekT4t\\\", :status=>:generated, :requested_at=>Thu, 06 Oct 2022 09:48:42 UTC +00:00, :params=>{:from_datetime=>2022-09-29 09:48:42 +0000, :to_datetime=>2022-10-06 09:48:42 +0000}, :generated_at=>2022-10-06 09:48:43 +0000, :expires_at=>2022-11-05 09:48:43 UTC, :download_count=>0}\"}"]}}},"resource_context_changed":{"title":"Add, remove, update context","description":"Add, remove, update context","type":"object","properties":{"notification_type":{"const":"resource_context_changed"},"source":{"$ref":"#/definitions/source"},"resources":{"additionalProperties":{"type":"object","required":["added","updated","removed"],"properties":{"added":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"string"}}}},"removed":{"type":"array","items":{"type":"object"}},"updated":{"type":"array","items":{"type":"object"}},"asset_id":{"$ref":"#/definitions/asset_id"},"resource_type":{"$ref":"#/definitions/resource_type"},"type":{"enum":["upload"],"example":"upload"}}}}}},"resource_display_name_changed":{"title":"Resource display name changed","description":"Resource display name changed","type":"object","properties":{"notification_type":{"const":"resource_display_name_changed"},"source":{"$ref":"#/definitions/source"},"asset_id":{"$ref":"#/definitions/asset_id"},"resources":{"type":"array","items":{"type":"object","properties":{"asset_id":{"type":"string"},"resource_type":{"type":"string"},"type":{"type":"string"}}}}}},"resource_metadata_changed":{"title":"Resource metadada changed","description":"All values are reflected by the value external_id (of dropdown or multi-pick list type metadata), and fields by their field external_id.","type":"object","properties":{"notification_type":{"const":"resource_metadata_changed"},"source":{"$ref":"#/definitions/source"},"resources":{"type":"object","additionalProperties":{"type":"object","properties":{"previous_metadata":{"type":"object"},"new_metadata":{"type":"object"},"asset_id":{"$ref":"#/definitions/asset_id"},"resource_type":{"$ref":"#/definitions/resource_type"},"type":{"enum":["upload"]}}}}}},"resource_tags_changed":{"title":"Resource tags changed","description":"Resource tags changed","type":"object","properties":{"notification_type":{"const":"resource_tags_changed"},"source":{"$ref":"#/definitions/source"},"resources":{"type":"array","items":{"type":"object","required":["public_id","resource_type","type"],"properties":{"asset_id":{"$ref":"#/definitions/asset_id"},"public_id":{"$ref":"#/definitions/public_id"},"resource_type":{"$ref":"#/definitions/resource_type"},"type":{"enum":["upload"]},"added":{"type":"array","items":{"type":"string","description":"Tags names"}},"removed":{"type":"array","items":{"type":"string","description":"Tags names"}}}}}}},"sprite":{"title":"TODO","description":"TODO","type":"object","properties":{"notification_type":{"const":"sprite"}}},"upload":{"title":"Upload notification","description":"Upload notification","allOf":[{"$ref":"#/definitions/notifications_type/definitions/upload_generic"},{"$ref":"#/definitions/notifications_type/definitions/upload_video"}]},"upload_video":{"title":"Upload video additional fields","description":"Fields that are additionally available when video is uploaded","type":"object","properties":{"audio":{"type":"object","properties":{"codec":{"type":"string","examples":["codec"]},"bit_rate":{"type":"string","examples":["253375"]},"frequency":{"type":"number","examples":[48000]},"channels":{"type":"number","examples":[2]},"channel_layout":{"type":"string","examples":["stereo"]}}},"video":{"type":"object","properties":{"pix_format":{"type":"string","examples":["yuv420p"]},"codec":{"type":"string","examples":["h264"]},"level":{"type":"number","examples":[52]},"profile":{"type":"string","examples":["High"]},"bit_rate":{"type":"string","examples":["21777545"]},"time_base":{"type":"string","examples":["1/25"]}}},"is_audio":{"type":"boolean"},"frame_rate":{"type":"number","examples":["25"]},"bit_rate":{"type":"number","examples":[24457805]},"duration":{"type":"number","examples":[11.771667]},"rotation":{"type":"number","examples":[0]},"nb_frames":{"type":"number"}}},"upload_generic":{"title":"Upload notification schema generic for all types","description":"Upload notification","type":"object","required":["notification_type","timestamp","request_id","public_id","eager"],"properties":{"notification_type":{"const":"upload"},"timestamp":{"type":"string","format":"date-time","examples":["2020-02-21T00:58:47+00:00"]},"request_id":{"$ref":"#/definitions/request_id"},"public_id":{"$ref":"#/definitions/public_id"},"asset_id":{"$ref":"#/definitions/asset_id"},"version":{"type":"number","format":"integer","examples":[1662026378]},"version_id":{"type":"string","examples":["a2c0e524305ebc4c4192c81f469077d7"]},"width":{"type":"number"},"height":{"type":"number"},"format":{"type":"string","examples":["png","mp4"]},"resource_type":{"$ref":"#/definitions/resource_type"},"created_at":{"type":"string","format":"date-time","examples":["2022-09-01T09:59:38Z"]},"tags":{"type":"array","items":{"type":"string"}},"type":{"type":"string","examples":["upload"]},"etag":{"type":"string","examples":["9b80c1495fe48cb986972ee63cc0c887"]},"placeholder":{"type":"boolean"},"batch_id":{"type":"string","examples":["fa799774d954dc3e2a9c2a871024be71651d8af0aa07229f7909c9e0b8d294bf"]},"url":{"type":"string","examples":["http://res.cloudinary.com/example/image/upload/v1662026378/jzkhlqjh5h2g5ollmqk5.png"]},"secure_url":{"type":"string","examples":["http://res.cloudinary.com/example/image/upload/v1662026378/jzkhlqjh5h2g5ollmqk5.png"]},"folder":{"type":"string","examples":["example_folder"]},"access_mode":{"enum":["public"],"examples":["public"]},"context":{"type":"object","properties":{"custom":{"type":"object","properties":{"alt":{"type":"string","examples":["Sample preview image"]},"caption":{"type":"string","examples":["Mountains"]}}}}},"moderation":{"type":"array","items":{"type":"object","properties":{"response":{"type":"object","properties":{"moderation_labels":{"type":"array"},"moderation_model_version":{"type":"string","examples":["5.0"]},"human_loop_activation_output":{"type":"null"},"status":{"type":"string","examples":["approved"]},"kind":{"type":"string","examples":["aws_rek"]},"updated_at":{"type":"string","format":"date-time","examples":["2022-08-19T14:27:47Z"]}}}}}},"overwritten":{"type=":"boolean","description":"Is asset overwritten.","examples":[true,false]},"original_filename":{"type":"string","examples":["DALL·E 2022-08-25 13.49.25 - a cyberpunk version of rzeszów main square"]},"api_key":{"type":"string","examples":["259196794283841"]},"eager":{"type":"array","items":{"type":"object"}}}}}},"resource_type":{"title":"Resource type","description":"Resource type","enum":["image","css","javascript","video","raw"],"examples":["image"]},"source":{"title":"Source","description":"Source","enum":["ui","api"],"examples":["ui"]},"asset_id":{"title":"Asset id","description":"Asset id","type":"string","examples":["ede59e6d3befdc65a8adc2f381c0f96f"]},"public_id":{"title":"Public id","description":"Public id","type":"string","examples":["test_image"]},"request_id":{"title":"Request id","description":"Request id","type":"string","examples":["a6f822e8f566edaf806bbdfc573634d8"]},"type":{"title":"Source of resource","description":"Source of resource","enum":["upload","facebook","twitter","twitter_name","youtube","foursquare","sprite","fetch","asset","gravatar","text","gplus","private","hulu","vimeo","animoto","dailymotion","multi","instagram","instagram_name","url2png","list","worldstarhiphop","media_optimization","authenticated"]}}}
